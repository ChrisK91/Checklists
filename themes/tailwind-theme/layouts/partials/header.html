<header class="sticky top-0 z-40 w-full px-4 pt-2 pb-2 bg-gray-900">
    {{/*  CSS functionality for menu toggle  */}}
    <style type="text/css">
        input#nav-toggle:checked~label#show-button {
            display: none;
        }

        input#nav-toggle:checked~label#hide-button {
            display: flex;
        }

        input#nav-toggle:checked~#nav-menu {
            display: block;
        }
    </style>

    <nav class="flex flex-wrap items-center justify-between">
        <div class="flex flex-row items-stretch">
            <div>
                <a href="{{ .Site.Home.Permalink }}" class="font-sans text-2xl font-bold leading-none text-gray-200 no-underline">
                    {{ .Site.Title }}
                </a><br>
                <span class="text-xs leading-none text-indigo-300">medical checklists</span>
            </div>
            <div class="flex items-center mx-2 my-0 border-l-2 border-gray-600">
                <p class="flex p-0 mx-2 my-0 text-4xl font-light text-gray-200 uppercase">
                {{- if .Params.Title }}
                {{ .Params.Title }}
                {{ end -}}
                </p>
            </div>
        </div>

        <input id="nav-toggle" type=checkbox class="hidden">
        <label id="show-button" for="nav-toggle"
            class="flex items-center text-gray-500 sm:hidden hover:text-blue-500">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <title>Menu Open</title>
                <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z" />
            </svg>
        </label>
        <label id="hide-button" for="nav-toggle" class="flex items-center hidden text-gray-700 hover:text-blue-500">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <title>Menu Close</title>
                <polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
                    transform="rotate(45 10 10)" />
            </svg>
        </label>

        <ul id="nav-menu" class="items-stretch hidden w-full mt-2 sm:flex sm:w-auto sm:block sm:mt-0 sm:space-x-2">
            <div class="self-center hidden" id="loadingspinner">
                <svg fill='none' class="w-10 h-10 animate-spin" viewBox="0 0 32 32" xmlns='http://www.w3.org/2000/svg'>
                    <path clip-rule='evenodd'
                        d='M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z'
                        fill='currentColor' fill-rule='evenodd' />
                </svg>
            </div>

            <!-- Search inspired by https://palant.info/2020/06/04/the-easier-way-to-use-lunr-search-with-hugo/#the-javascript-code -->
            <form id="search" class="search" role="search">
                <input type="search" id="search-input" class="block w-full p-1 m-2 bg-gray-300 rounded sm:m-0 sm:w-auto border-b-1 focus:placeholder-gray-400" placeholder="{{i18n "searchplaceholder"}}">
            </form>

            {{ with .Site.GetPage "/about" }}
            <li class="self-center">
                <a href="{{ .Permalink }}" class="block p-2 m-2 text-gray-300 sm:p-0 sm:m-0 hover:text-blue-400">{{ .Title }}</a>
            </li>
            {{ end }}
            {{ range .Site.Sections }}
            <li class="self-center">
                <a href="{{ .Permalink }}" class="block p-2 m-2 text-gray-300 sm:p-0 sm:m-0 hover:text-blue-400">{{ .Title }}</a>
            </li>
            {{ end }}
            {{ with .Site.GetPage "/tags" }}
            <li class="self-center">
                <a href="{{ .Permalink }}" class="block p-2 m-2 text-gray-300 sm:p-0 sm:m-0 hover:text-blue-400">{{ .Title }}</a>
            </li>
            {{ end }}

            {{ if .Site.IsMultiLingual }}
            {{ $siteLanguages := .Site.Languages}}
            {{ $pageLang := .Page.Lang}}
            {{ range .Page.AllTranslations }}
                {{ $translation := .}}
                {{ range $siteLanguages }}
                    {{ if eq $translation.Lang .Lang }}
                        {{ $selected := false }}
                        {{ if eq $pageLang .Lang}}
                            <div class="box-border self-center p-2 m-2 border-b-2 border-indigo-500 text-indigo-50 sm:p-0 sm:m-0 hover:text-blue-500 focus:outline-none"><a href="{{ $translation.Permalink }}">{{ .LanguageName }}</a></div>
                        {{ else }}
                            <div class="self-center p-2 m-2 text-gray-300 sm:p-0 sm:m-0 hover:text-blue-500 focus:outline-none"><a href="{{ $translation.Permalink }}">{{ .LanguageName }}</a></div>
                        {{ end }}
                    {{ end }}
                {{ end }}
            {{ end }}
            {{end}}
        </ul>
    </nav>
</header>